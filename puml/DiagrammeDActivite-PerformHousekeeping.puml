@startuml PerformHousekeeping Activity

title Diagramme d'Activite - PerformHousekeeping

start

:Definir la section courante comme "Housekeeping";
:Initialiser les indicateurs de traitement;

if (Phase 1 ou Phase 2?) then (oui)
  :Continuer;
else (non)
  :Definir le commentaire d'abandon comme "Missing Phase";
  :Abandonner le traitement;
  stop
endif

:Initialiser les structures de donnees;
:Definir le statut de fichier comme "NoIO";
:Ouvrir les fichiers;
:Initialiser les erreurs de traitement;
:Configurer les champs cles;

if (Phase 1?) then (oui)
  :Initialiser le maetre de reclamation;
  :Definir la route utilisateur;
  :Definir la commande d'E/S comme "ReadNext";
  
  while (Pas de fin de fichier et\nCode d'extension de reclamation != "MAX ") is (vrai)
    :Effectuer l'E/S de base de donnees;
  endwhile
  
  if (Fin de fichier?) then (oui)
    :Definir le statut de fichier comme "  ";
  else (non)
    :Sauvegarder le code d'extension de reclamation;
  endif
endif

:Initialiser le maetre de reclamation;
:Definir la route utilisateur;
:Definir la commande d'E/S comme "ReadNext";
:Effectuer l'E/S de base de donnees;

if (Fin de fichier?) then (oui)
  :Definir l'indicateur Go/NoGo comme "N";
endif

:Configurer l'en-tete de cycle et les informations de voyage;
:Definir la commande d'E/S comme "ReadNext";
:Effectuer l'E/S de base de donnees;
:Initialiser le traitement de texte;

stop

@enduml
